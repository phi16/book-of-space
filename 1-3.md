### 無から実数へと至る

#### 自然数

いろんな空間を表現するべく「数」を作っていこうと思うわけですが、数には様々な階層があります。単純な数から順番に作っていくことになるので、まずは始まりである==自然数==から作っていきます。

自然数とは「最初の数」と「ある自然数の次の数」がある数のことです。もうちょっと言うと次の定義が使えます。

集合 $X$ が自然数全体の集合であるとは、最初の数 $o\in X$ 及び次の数を返す写像 $s : X \to X$ が存在して、次を満たすことを言います。

- $\neg (\exists x \in X. s(x) = o)$
    - $o$ は $s$ によって作られ得ないという意味です。
- $s$ は単射
    - $s$ は毎度新たな数を生み出すということです。
- 任意の述語 $P$ について、$P(o) \land (\forall x \in X. P(x) \Rightarrow P(s(x))) \Rightarrow \forall x \in X. P(x)$
    - 述語を量化することはできないので、何か具体例を使う度にこの性質を取り出しなおすことになります。
    - これは==帰納法, induction==と呼ばれ、自然数を好きに分解する方法を提供します。

この性質を元に、例えば $0 = o, 1 = s(o), 2 = s(s(o)), 3 = s(s(s(o))), \ldots$ と定義していくことで数が生み出されていきます。このような形式で生み出された数を==自然数, natural number==と呼び、自然数全体からなる集合 $\{0,1,2,3,\ldots\}$ を $\mathbb{N}$ と書きます。

> ちなみに $1 = o, 2 = s(o), 3 = s(s(o)), \ldots$ と「名付ける」ことは何も問題ありません。それに合わせて演算を組み直すだけです。ただ $0$ は在ると便利なので私達は $0$ から自然数を始めます。

**実はここまでで自然数は定義されていません**。条件を満たす$o$ と $s$ があったらこんなことができるという話です。とはいえ、実際にそんな $o$ と $s$ は存在します。

- $o = \varnothing$
- $s(x) = \{x\}\cup x$
- $X = \{o,s(o),s(s(o)),\ldots\} = \{\varnothing,\{\varnothing\},\{\{\varnothing\},\varnothing\},\ldots\}$
- $\neg (\exists x \in X. s(x) = o)$
    - $\exists x\in X. s(x) = o$ と仮定する。
    - $\{x\}\cup x = \varnothing$ となる $x$ を取り出せる。
    - しかし $x\in\{x\}\cup x$ だが $x\not\in\varnothing$ である。
    - よって矛盾。
- $\forall x,y\in X. f(x) = f(y) \Rightarrow x = y$
    - $x,y\in X$ を取る。
    - $\{x\}\cup x = \{y\}\cup y$ とする。
    - $x\in \{y\}\cup y$ であることから、$x \in \{y\}\lor x \in y$ である。
    - 同様にして $y \in \{x\}\lor y \in x$ であることがわかる。 
    - $x = y \lor x \ne y$ である。
        - $x = y$ の場合はおわり。
        - $x \ne y$ の場合、$x \in y$ かつ $y \in x$ であることになる。
            - 実はここから矛盾が導出できることが知られている。
            - のでおわり。
    - よって $x = y$ が導出できる。
- 述語 $P$ について、$P(o) \land (\forall x \in X. P(x) \Rightarrow P(s(x))) \Rightarrow \forall x\in X. P(x)$
    - $P(o) \land (\forall x\in X. P(x)\Rightarrow P(s(x)))$ を仮定する。
    - $n\in X$ を取る。$X$ の作り方から、$n$ は $o$ に対して**ある有限回** $s$ を使った結果であることがわかる。
    - 仮定である $P(o)$ に対して $s$ を使った回数だけ $\forall x\in X. P(x) \Rightarrow P(s(x))$ を使うと、$P(n)$ が得られる。
        - 厳密ではありませんが、今回は $X$ の作り方が厳密でないので仕方ないのです。
    - よって $\forall x\in X. P(x)$.

何はともあれ自然数は**在る**のです。これで初めて $5$ などの数を無から言及できるようになりました。

> 他にも自然数は「在る」かもしれませんし、実際在ります。でも実際どれかは大した問題ではなくて、自然数であるための要請さえ満たせばもう考える必要はないのです。$(a,b)$ が $\{\{a\},\{a,b\}\}$ で定義されていることがどうでもいいように、$1$ が $\{\varnothing\}$ であることはどうだっていいのです。重要なのは**本質**で、即ち**特徴付け**なのです。例えば今回は $2 = \{0,1\}$ が直接成り立ったりもしますが、本質を考えれば別の集合として $\mathbf{2} = \{0,1\}$ を定義することが「正しい」のです。

ここまであれば自然数に関する演算を作ることができます。例えば:

- $p : \mathbb{N}\to [\mathbb{N}, \mathbb{N}]$
- $p(o) = 1_\mathbb{N}$
- $p(s(n)) = s \circ p(n)$

この記述はちゃんと $\mathbb{N} \to [\mathbb{N}, \mathbb{N}]$ である写像を定義しています。何故なら $P(n)$ として「$p(n)$ は $s$ を $n$ 回合成した写像に等しい」という述語を考えると、$P(o)$ を満たし (0回合成するというのは何もしないということです)、そして $\forall x\in \mathbb{N}. P(x) \Rightarrow P(s(x))$ を満たします ($p(x)$ が $s$ を $n$ 回合成した写像なら、$p(s(x)) = s \circ p(n)$ はたしかに $s$ を $s(n)$ 回合成した写像です)。よって帰納法から $\forall n\in \mathbb{N}. P(n)$ が導出できるので、$p(n)$ が何なのかが定まっていることになるわけです。そしてこれは==足し算, addition==を表しています。

$p(n)$ は与えられた自然数に $n$ を足す演算で、例えば $p(0) = 1_\mathbb{N}$ は何も変化させない演算、$p(2) = s\circ s$ は2つ次の自然数を取る演算になります。実際に使うと $p(2)(3) = s(s(3)) = 5$ のように計算ができます。以後、$p(x)(y)$ を $x+y$ と表記します。

また、似たようにして==掛け算, multiplication==も定義できます。

- $m : \mathbb{N} \to [\mathbb{N},\mathbb{N}]$
- $m(o) = x \mapsto 0$
- $m(s(n)) = x \mapsto x + m(n)(x)$

わかりやすく書けば $0\times x = 0, (n+1)\times x = x + n\times x$ ということです。これも帰納法によりちゃんと写像になっていることがわかります。$m(x)(y)$ を $x \times y$ と表記します。

さて、==引き算, subtraction==を作ってみたくなるところではありますが、ここで同じ写像 $\mathbb{N} \to [\mathbb{N},\mathbb{N}]$ と考えると問題があります。$3$ から $5$ を引いたら $-2$ です。でもそれは日常的に考えると自然数ではありません。つまり終域の終域は $\mathbb{N}$ では足りないはずなのです。これは何故かというと、引き算には $y+x = z \iff y = z-x$ という性質がある**べき**だからです。

そんな演算は自然数には存在しません。**ならば、そんな演算が在ったことにすれば**どうなるでしょうか？

#### 整数

この世界に於ける「存在」とは、「集合があって」「求められる性質を満たす」以上の意味はありません。現実世界に存在するとかしないとかは関係ありません。演算に求める性質があるなら、その性質を満たすべく自由に演算や集合を拡張すれば良いのです。

「拡張」というのは元の集合を含むことを意味しません。しかし、元の性質は当然保っていていてほしいので「新しい世界に埋め込む」という形を取ることになります。要素が埋め込まれる他、演算の結果が変わらないことも要求したいところですね。

さて、引き算が自由に行えるように自然数を拡張します。$y = z - x$ という引き算の結果は $y + x = z$ を満たすのでした。**ならば、この $z$ と $x$ の組自体を $y$ と呼んではどうでしょうか**。つまり、全ての数は「ある自然数からある自然数を引いたもの」だと言うことにするのです。引く方を $0$ にすれば元の自然数はちゃんと含まれそうですし、引かれる方を $0$ にすれば負の数が表せそうな雰囲気もあります。実際に足し算は定義できますし、引き算もちゃんと定義できます。

- $(z_1,x_1) + (z_2,x_2) = (z_1+z_2, x_1+x_2)$
- $(z_1,x_1) - (z_2,x_2) = (z_1+x_2, x_1+z_2)$

> 足し算の記号は今2つの意味で使われています。$\mathbb{N}$ に関する演算と、$\mathbb{N}\times\mathbb{N}$ に関する演算。左辺や右辺をちゃんと見ればどの意味で使われているかは判断が出来るはずで、このように記号を区別せずに用いることが多いです。特に「感情的に」同じ意味を表しているなら同じ記号を使いたいものです。

定義において組の中には引き算が入ってないことが重要です。この定義がまともであることは $(z,x)$ を $z-x$ と解釈することでわかり、また例えば $3$ を表す $(5,2)$ と $-2$ を表す $(2,4)$ を考えると $(5,2) - (2,4) = (9,4)$ と、確かに $5$ を表しそうな雰囲気があります。しかし問題があって、$(2,1) \ne (1,0)$ なのです。どちらも $1$ を表すはずなのに異なるのは嬉しくないです。そこで、**同じだったことにした**らどうでしょうか。

違ったものを等しくするテクニックとして、「同じであるものをかき集める」方法が知られています。$(2,1)$ と等しそうなもの全体と、$(1,0)$ と等しそうな物全体は同じものになりそうじゃないですか。「$x$ と等しそうなもの全体の集合」を $x$ の==同値類, equivalence class==と呼びます。これをちゃんと定義するべく、「等しそうなもの」という概念から考えていきます。

集合 $X$ について、$X$ と $X$ の関係として「表すものが実質的に等しい」という関係を取ることができたとします。例えば今回は $\mathbb{N}\times \mathbb{N}$ 同士の関係で、$(z_1,x_1)$ と $(z_2,x_2)$ が表すものが実質的に等しいという条件は $z_1+x_2 = z_2+x_1$ と表すことができます。

> この条件式をちゃんと記述できるのはとても大事で、例えばここに引き算は使えません。今の所存在がわかっている自然数についての条件、自然数についての演算だけで書き下さなければなりません。定義が完了するまでは我慢なのです。

ここで「実質的に等しい」ことを表す関係 $R\subseteq X\times X$ には次の性質が要求されます:

- $\forall x\in X. (x,x)\in R$ (反射律)
    - 自分自身とは等しい
- $\forall x,y\in X. (x,y)\in R\Rightarrow (y,x)\in R$ (対称律)
    - 片方がもう片方に等しいなら、逆向きにも等しい
- $\forall x,y,z\in X. (x,y)\in R\land (y,z)\in R \Rightarrow (x,z)\in R$ (推移律)
    - あるモノに等しい2つのモノを見つけたら、それらは等しい

これらを満たすとき==同値関係, equivalence relation==であると言います。等しさを考える上では当然成り立ってほしい気持ちがあります。実際、先程の関係 $S = \{((z_1,x_1),(z_2,x_2))\in(\mathbb{N}\times\mathbb{N})\times(\mathbb{N}\times \mathbb{N})\mid z_1+x_2=z_2+x_1\}$ はこれらを満たします。

すると $x$ についての同値類 $[x]$ を $\{y\in X\mid (x,y)\in R\}$ で定義できます。同値類として成り立ってほしい当然の性質が次なのでした。

- $\forall (x,y)\in X\times X. (x,y)\in R \iff [x] = [y]$
    - 左から右が成り立つこと
        - $(x,y)\in R$ とする。
        - $z \in [x]$ とする。
            - 定義より $(x,z)\in R$.
            - 前提に対称律を使って $(y,x)\in R$.
            - これらに推移律を使って $(y,z)\in R$.
            - よって $z\in [y]$.
        - 同様にして $\forall z\in [y]. z\in [x]$.
        - 従って $[x] = [y]$.
    - 右から左が成り立つこと
        - $[x] = [y]$ とする。
        - 反射律より $y\in [y] = [x]$ である。
        - $[x]$ の定義より $(x,y)\in R$.

つまりこれが「求めているもの」なのです。同値類全体の集合 $\{a\in\mathcal{P}(X)\mid\exists x\in X. a = [x]\}$ を==商集合, quotient set==と言い、$X/R$ と書きます。

> $R$ による等しさを本当に等しかったことにする、というのは $R$ 以外の違いを除くという意味でもあり、$R$ で等しいように見えるものを全て1つに潰すとも捉えられます。割り算が「ものをひとまとめにしたときの集まりの数」であるように、これを割り算に近いものだと解釈して商と呼ぶわけです。「割り切れる」という条件が「同値関係である」という条件に対応しているとも言えます。

というわけで今までの議論より、$(\mathbb{N}\times\mathbb{N})/S$ が求めているモノになります。これを==整数, integer==と呼び、$\mathbb{Z}$ で表します。

ところでそうすると先程定義した $\mathbb{N} \times \mathbb{N}$ に関する加法・減法演算は整数とは違う定義域と終域を持つことになります (プログラム系の人なら「型が合わない」と呼ぶ状況です)。$\mathbb{Z}\to [\mathbb{Z},\mathbb{Z}]$ となる写像は同値類を受けとるわけで、組を受け取るわけではないのです。

写像が同値類を受け取ったとき、それは $[x]$ と表記できます。しかし $(x,y)\in R$ であるような $y$ を使って $[y]$ とも表記できるのです。写像の性質から**等しいモノは等しいモノへと写る**必要があるので、同値類を受け取る写像 $f : X/R \to Y$ は $\forall (x,y)\in R. f([x]) = f([y])$ を満たさなければなりません ($[x] = [y]$ なので)。逆に言えば、同値類ではなく元々の要素を受け取る写像 $g : X \to Y$ があったとき、$\forall (x,y)\in R. f(x) = f(y)$ を満たすなら同値類上の写像 $\hat{g} : X/R \to Y$ へと拡張できます。この条件を==well-defined性==と言います。これは言わば同値類を分解する方法そのものです。

> 自然数が帰納法で分解される ($\mathbb{N} \to Y$ という写像が作れる) ように、同値類はwell-defined性によって分解されます。作ったものは壊さなければその意味がありません。推論規則にも例えば $A\land B$ を構成するものと $A\land B$ を分解するものがありました。**構成と分解**は至るところにある現象なのです。

というわけで加法演算のwell-defined性を確かめてみましょう。この演算は今は $[(z_1,x_1)] + [(z_2,x_2)] = [(z_1+z_2,x_1+x_2)]$ を満たすものとして考えられてます。

- $(z_1,x_1), (z'_1,x'_1), (z_2,x_2), (z'_2,x'_2) \in \mathbb{N}\times\mathbb{N}$ を取る。
- $((z_1,x_1),(z'_1,x'_1))\in S$ 及び $(z_2,x_2),(z'_2,x'_2))\in S$ を満たすとする。
    - $[(z_1+z_2,x_1+x_2)]$ と $[(z'_1+z'_2, x'_1+x'_2)]$ が等しければよい。
        - この理由は自明ではないですが、定義を砕いていけばわかります。
    - 即ち $((z_1+z_2,x_1+x_2),(z'_1+z'_2,x'_1+x'_2))\in S$ であればよい。
    - 前提より $z_1+x'_1=z'_1+x_1, z_2+x'_2=z'_2+x_2$.
    - よって $z_1+x'_1+z_2+x'_2 = z'_1+x_1+z'_2+x_2$.
    - よって $(z_1+z_2)+(x'_1+x'_2) = (z'_1+z'_2) + (x'_1+x'_2)$.
    - よって $((z_1+z_2,x_1+x_2),(z'_1+z'_2,x'_1+x'_2))\in S$ が成り立つ。
- おわり。

> この証明は「前提から成り立つ性質を導出する」他に「成り立てば証明が完了する性質で結論を置き換える」ということを行っています。$X \Rightarrow Z$ を導出したいとき、$X \Rightarrow Y$ があれば残りは $Y \Rightarrow Z$ で、逆に $Y \Rightarrow Z$ があれば残りは $X \Rightarrow Y$ となるわけです。便利さやわかりやすさが異なるので場合によって思いついた方を使う感じでいいと思います。「今どっちを行ったのか」には自覚的であるべきですが。

これで初めて整数上の足し算が作れたことになります。同様にして引き算もうまくいくことがわかるので、やっと加減算が定義されました。ちゃんと $y+x=z \iff y=z-x$ も成り立っています。乗算も $(z_1,x_1)\times (z_2,x_2) = (z_1\times z_2+x_1\times x_2, z_1\times x_2+x_2\times z_1)$ を基にして作れます。なんだかなんでもできそうな気がしてきました。

- ちなみに商集合は同値類を使って定義できたわけですが、そんな定義よりもwell-defined性のほうが本質的です。なので丁寧に同値類を使って集合を操作する気持ちよりも、等しいものは等しくあれという気持ちを強く持つほうがいいと思います。所詮テクニックだと思うのです。
    - 困ったときに帰る先がある、というのはとても大事なことではあります。だけど本来は困ることは無い、というのが特徴付けの特徴なはずです。まぁ柔軟にいきましょう。
- そういえば今まで演算は $\mathbb{N} \to [\mathbb{N},\mathbb{N}]$ のようにちょっと不思議な形で書かれていました。2つモノを受け取るということは確かに写像を返す写像になるわけですが、一気に受け取っても差し支えはないはずです。実際、$[A\times B, C] \cong [A,[B,C]]$ という関係が知られています。つまり $\mathbb{Z} \to [\mathbb{Z},\mathbb{Z}]$ は $\mathbb{Z}\times\mathbb{Z} \to \mathbb{Z}$ とほぼ同じなのです。元々 $f(x)(y)$ と表記されていた演算結果は $f(x,y)$ と表せます。以後あまり区別をせずに使っていきます。
    - 今「同じ/等しい」を表す概念は3種類あります。集合として等しい $A=B$、同型を表す $A\cong B$、ある同値関係の下で等しい $(A,B)\in R$ です。1個目と3個目は**同じ集合の要素**でなければなりません。同型は世界そのものが似通ってることを表すのでその限りではありません。どれも意味は異なりますが、$A=B$ が成り立てばどれも成り立つのは確かです。
    
ところで整数は自然数の拡張であったはずです。でも前に言ったように $\mathbb{N}$ は $\mathbb{Z}$ の部分集合ではなく、埋め込む方法が必要なのでした。==埋め込み, embedding==であるというのはここでは単射であることです。元々違うものは違うものになるべきなのです。今回埋め込みは次で定義されます。

- $i = x \mapsto [(x,0)]:\mathbb{N} \to \mathbb{Z}$

これは単射で、さらに演算の結果も変わってないことを示す $i(x)+i(y) = i(x+y)$ などの性質を満たします。これを以って以後 $0$ や $3$ の数字は $0,3\in \mathbb{Z}$ として解釈できるようになる他、$\mathbb{N}$ を $\{[(x,0)]\mid x\in\mathbb{N}\}$ と再定義すればちゃんと $\mathbb{N}\subseteq\mathbb{Z}$ を満たすこともできます。もはや今までどう作ってきたかはどうでも良いということですね。直観が培われていれば誤った推論を指摘できるし、特徴付ける物があればそれだけで全ての操作が出来るのです。

> 上の文章における再定義では $=$ を使っていません。何故なら左と右で同じ記号を使うと「本来違うものである」ことがわからなくなるからです。元々違うもので文脈によって区別できるなら問題ないわけですが、再定義だと同じになっちゃうので困るのです。なので自然言語でお茶を濁しました。「$Y = X$ として $X = Y+1$」のように書いても**等式に時間の概念は無い**ので思った通りにはならないわけです。これは本質的ではなく言語上での問題です。

#### 有理数

次にやりたいことは==割り算, division==です。前と同じように $y\times x = z \iff y = z / x$ という関係性を願って新たな集合を作ってみましょう。ちなみにここで $x\ne 0$ ですね。

> この条件は人為的な感じがします。でも実際は「色んな条件を課して良いけれど今回は $x\ne 0$ にする」という状況だったりします。別に $x=0$ を許したっていいんですけど、そうすると色々あって**全ての要素が等しい**集合になります (潰れてしまう、とか言います)。そんなのは面白くないのでその**次に**面白い状況を考えたいのです。
> 色々というのは $a\times 0=0$ だから $a=0/0$ が成り立ち、同様にして $b=0/0$ が成り立つので任意の $a,b$ について $a=b$ が言えるということです。

やることは変わらなくて、$\mathbb{Z}\times (\mathbb{Z}\setminus\{0\})$ をまず考えて、その要素 $(z_1,x_1),(z_2,x_2)$ に対して $z_1\times x_2 - z_2\times x_1 = 0$ であることによって定義できる関係 $T$ を考えます。これは同値関係になるので、$\mathbb{Q} = (\mathbb{Z}\times(\mathbb{Z}\setminus\{0\}))/T$ という集合ができます。これを==有理数, rational number==と呼び、いつだって ($0$ 以外なら) 割り算ができる数となります。すごい。

前と同じように埋め込みを $x\mapsto [(x,1)]:\mathbb{Z}\to\mathbb{Q}$ で定義すればこれからは $2$ や $-5$ などの数を有理数だと解釈できるし、$\mathbb{N}\subseteq\mathbb{Z}\subseteq\mathbb{Q}$ が成り立つように $\mathbb{N}$ と $\mathbb{Z}$ を定義しなおすこともできます。

$\mathbb{Q}$ においてはいわゆる加減乗除がちゃんと定まって、次のような演算になります。

- $+,-,\times:\mathbb{Q}\times\mathbb{Q}\to\mathbb{Q}$
- $/:\mathbb{Q}\times(\mathbb{Q}\setminus\{0\})\to\mathbb{Q}$
    - こうなるから、$3/0$ とは書けないのです。「型が合わない」のです。

どちらかというと逆数を取る演算 ${}^{-1}:\mathbb{Q}\setminus\{0\}\to\mathbb{Q}\setminus\{0\}$ を使って $x/y = x\times y^{-1}$ と定義するほうが一般的かもしれません。結構 $\times$ と似通っている性質があるので直接それを受け継ぐように表現する方が証明が単純にはなります。

> ところで演算の記号そのものを写像のように書いてきましたが、流石に「${}^{-1}$」は抵抗があるかもしれません。「式の一部を抜いて写像にする」ことは日常的に行われ、$x\times y$ から $x$ を抜いて $-\times y$ に、さらに $y$ を抜いて $-\times -$ と表記することもあります。$-$ ではなく $\cdot$ を使って $x \times \cdot:\mathbb{Q}\to\mathbb{Q}$ と書くこともあります (受け取る数が1つになっているのに注意)。この表記方法では逆数を取る演算は $\cdot^{-1}$ とか $(-)^{-1}$ とかで表されることになります。便利なので。

最後におまけで==小数表記, decimal notation==を導入しておきます。$53.764$ のような「数」は $53+764/1000\in\mathbb{Q}$ のように解釈することにします。

さて、次に実数を作ることになるわけですが、実数というのは「現実にある数」とかそういうのではありません。数学における実数は「ある性質を満たす数に関する条件に対して、その条件を満たす実数が存在する」くらいの意味です。ここでのある性質を満たす条件というのは例えば $x\times x = 2$ とかがあって、有理数では足りないことが知られています。

> 以後 $\underbrace{x\times\cdots \times x}_n$ を $x^n$ と書きます。あと $x\times y$ も $xy$ と書きます。数と数の間に演算子がなければそれは乗算の省略です。

- $\neg \exists x\in\mathbb{Q}. x^2 = 2$ の証明
    - $x^2 = 2$ である $x\in\mathbb{Q}$ が存在するとする。
    - $p\in\mathbb{Z}$ と $q\in\mathbb{Z}\setminus\{0\}$ が存在して $x = p/q$ を満たし、また $p$ と $q$ のどちらかは $2$ で割り切れない。
        - 何故なら $x = [(a,b)]$ と表せるので、$[(a,1)] / [(b,1)] = [(a,b)]$ より $p = [(a,1)], q = [(b,1)]$ を取ればいい為。$b \ne 0$ なので $q\ne 0$ もちゃんと満たす。
        - $x$ が $y$ で==割り切れる, divisible==というのは $\exists z\in\mathbb{Z}. y = xz$ であることをいう。$p,q$ どちらも $2$ で割り切れるなら新たに $x = [(a/2,b/2)]$ を取り直せばよい。有限回取り直せば割り切れる $p$ と $q$ が見つかる。
    - 今 $p^2 = 2q^2$ である。
    - $p$ は $2$ で割り切れる。
        - 割り切れないと仮定すると、$\exists u\in\mathbb{Z}. p = 2u+1$.
            - これは余りのある割り算についてちゃんと考えると導出できる。
        - $p^2 = 4u^2+4u+1 = 2(2u^2+2u)+1$ なので $p^2$ は $2$ で割り切れない。
        - でも $2q^2$ は明らかに $2$ で割り切れるので矛盾。
    - $p = 2r$ と置くと $4r^2 = 2q^2$ より $q^2 = 2r^2$
    - 同様にして $q$ も $2$ で割り切れる。
    - $p$ と $q$ のどちらかは $2$ で割り切れないという仮定と矛盾。
    - よって $x^2 = 2$ となる $x\in\mathbb{Q}$ は存在しない。

今までのように「$x^2=2$ を満たす $x$ が在ったことにした集合 $\mathbb{Q}[\sqrt{2}]$」を考えることも出来はするのですが、また新たな条件を満たす数が欲しくなりそうなものです。新たに拡張することなく元から全部含まれていたらそれはまた嬉しいわけなのです。

実数を取り出せる条件に課せられた性質とは、「任意の有理数に対して、それが**目的の数より小さいか大きいかを判定できる**こと」です。これを記述するためには大小関係を定義しなければならないので、実数に進む前にその準備を行いましょう。

自然数について、$R = \{(a,b)\in\mathbb{N}\mid \exists c\in\mathbb{N}. a+c = b\}$ で定義される関係を自然数の==順序, ordering==と呼び、$x \le y \iff (x,y)\in R$ と書きます。例えば $2\le 3$ で、$4 \not\le 1$ です。一般に集合 $X$ 上の関係 $R$ が「順序らしく振る舞う」ことを要請する為の性質として、次があります。

- $\forall x\in X. (x,x)\in R$ (反射律)
    - $x$ は $x$ 以上であることを示します。
- $\forall x,y\in X. (x,y)\in R \land (y,x)\in R \Rightarrow x = y$ (反対称律)
    - $x$ 以上で $x$ 以下ならそれは $x$ に等しいことを示します。
- $\forall x,y,z\in X. (x,y)\in R \land (y,z) \in R \Rightarrow (x,z)\in R$ (推移律)
    - $x$ 以上な $y$ 以上な数は $x$ 以上であることを示します。
    
> 同値関係の定義と違うのは対称律と反対称律だけです。
    
これを満たすとき==順序関係, order relation==と言います。また、完全律 $\forall x,y\in X. (x,y)\in R \lor (y,x)\in R$ が成り立つとき==全順序関係, total order relation==と言います。先程の自然数の順序は全順序の性質を満たします。

- 反射律: $x+0=x$ です。
- 反対称律: $x+c=y, y+c'=x$ とすれば $x+c+c'=x$ で $c=c'=0$ より $x=y$ です。
- 推移律: $x+c=y, y+c'=z$ とすれば $x+(c+c') = z$ です。
- 完全律: $\forall z\in\mathbb{Z}. (\exists n\in\mathbb{N}. z = n) \lor (\exists n\in\mathbb{N}. z = -n)$ が成り立つので、$z=x-y\in\mathbb{Z}$ を使うと導出できます。
    - 写像 $d: \mathbb{N} \to [\mathbb{N}, \mathbb{N}\times \mathbf{2}]$ を次で定義できます。
    - $d(0) = x \mapsto (x,1)$
    - $d(s(n)) = x \mapsto \begin{cases}(y,1)&\text{if }\exists y\in\mathbb{N}. d(n) = (s(y),1)\\(1,0)&\text{if }d(n) = (0,1)\\(s(y),0)&\text{if }\exists y\in\mathbb{N}.d(n) = (y,0) \end{cases}$
        - 条件部分は排他的 (かぶらない) で網羅的 (書いてない場合がない) です。
    - この写像は「差はどれくらいか」「どちらが大きいか」を与えてくれて、これを使うと先の命題が成り立つことがわかります。

> この説明は証明になってません。ですが、証明のために必要な要素は十分あると思います。証明というのは概ねアイディアが大切なので、それさえ説明すれば完全な証明を復元できる(ことを期待する)という場合は少なくないのです。こういう証明のかけらを**スケッチ**と呼んだりします。

同様にして整数について、$\{(a,b)\in\mathbb{Z}\mid \exists c\in\mathbb{N}. a+c = b \}$ で整数にも全順序を導入できます。有理数については $[(z_1,x_1)],[(z_2,x_2)]\in\mathbb{Q}$ に対して $(x_1x_2 \ge 0 \land z_1x_2 \le z_2x_1) \lor (x_1x_2\le 0 \land z_1x_2 \ge z_2x_1)$ で関係を定義するとwell-definedで全順序が入ります。これで概ね準備が整いました。

> ちょっとした条件式は $x\le 0$ だと順序がひっくり返るためです。任意の有理数 $[(z,x)]$ はうまく選ぶと $x\ge 0$ だったことにできる (そうでないなら $[(-z,-x)]$ を取ればいい) のですが、大した違いはないので愚直に定義しています。

最後に $x < y \iff x \le y \land x \ne y$ と定義しておきます。例えば $2\not<2$ です。$x < 0$ なとき==負, negative==、$x > 0$ なとき==正, positive==と呼びます。$|x| = \begin{cases}x&\text{if }x\ge 0\\-x&\text{otherwise}\end{cases}$ で==絶対値, absolute value==を定義します (常に $|x|\ge 0$ となります)。

#### 実数

有理数に関する述語 $Q(x)$ が次を満たすとします。これは「$x$ は目的の数より小さい」ことを表すものです。

- $\exists l,u\in\mathbb{Q}. Q(l) \land \neg Q(u)$
    - 目的の数は無限に小さくもなく、無限に大きくもない。
- $\forall a,b\in\mathbb{Q}. Q(b) \land a \le b \Rightarrow Q(a)$
    - $b$ が目的の数より小さいなら、それ以下の数 $a$ も目的の数より小さい。
- $\forall a\in\mathbb{Q}. Q(a) \Rightarrow \exists b\in\mathbb{Q}. a < b \land Q(b)$
    - 目的の数より小さい数 $a$ があったとき、それよりも大きいけど目的の数より小さい有理数が存在する。

この条件を満たすとき、ある境界によって有理数が「小さい側」と「大きい側」に分割されることになります。この分割を==デデキンド切断, Dedekind cut==と呼んだりしますが、まぁそれは唯の名前です。

例えば $Q'(x) = x < 1$ はこの条件を満たし、また $Q''(x) = x \le 0 \lor x^2 < 2$ もこれを満たします。

- $Q'$ について
    - $Q'(0)$ 及び $\neg Q'(2)$ が成り立つ。
    - $b < 1 \land a \le b$ のとき $a \le b < 1$ が成り立つ。
    - $Q'(a)$ であるような $a$ に対し、例えば $b = (a+1)/2$ は $a < b \land Q'(b)$ を満たす。
- $Q''$ について
    - $Q''(-1)$ 及び $\neg Q''(2)$ が成り立つ。
    - $b^2 < 2 \land a \le b$ のとき $a^2 \le b^2 < 2$ が成り立つ。
    - $Q''(a)$ であるような $a$ に対しても**頑張る**と $a < b \land Q''(b)$ となる $b\in\mathbb{Q}$ が構成できる。
        - $a < 1$ なら $b = 1$ を取ればよい。以降 $a \ge 1$ について考える。
        - $(a + 1/p)^2 < 2$ となる $p\in\mathbb{Q}, p > 0$ を見つければ十分。
        - $a^2 < 2$ より $\varepsilon = 2 - a^2$ とすると $\varepsilon > 0$
        - $2 - (a + 1/p)^2 = 2 - (a^2 + 2a/p + 1/p^2) = \varepsilon - 2a/p - 1/p^2$ より、$\varepsilon p^2 - 2ap - 1 > 0$ を満たす $p$ を構成すればよい。
        - $p = (a+a^2+\varepsilon)/\varepsilon$ とすると、これを満たす。
           - $p > (a+\sqrt{a^2+\varepsilon})/\varepsilon$ であればいいように見えるがこれは有理数ではないので、$a \ge 1, \varepsilon > 0$ から $\sqrt{a^2+\varepsilon} \le a^2+\varepsilon$ であることを使って置き換えたもの。
           - 実際 $\varepsilon p^2-2ap-1 = (a^2+\varepsilon-1)(a^2+\varepsilon)/\varepsilon$ で、$a^2+\varepsilon-1\ge 1+\varepsilon-1>0$ よりこれは $0$ より大きいことがわかる。
        - よって $b = a+1/p = 2(a+1)/(a+2)$ を取ればよい。

> $a^2 \le b^2 < 2$ というのは $a^2\le b^2 \land b^2 < 2$ を表します。これは推移律によってくっつけて書いても概ね問題ないからです。1度でも $\le$ ではなく $<$ を使うと「等しくあってはいけない」ことになるので、$a^2 < 2$ が導出されます。

さて、そんな条件が与えられたとき、その境界となる「目的の値」が存在してほしいのでした。存在してほしいので、在ったことにします。即ち、**そのような述語を実数と呼ぶ**のです。今まで述語とは呼んでいたもののその中身は前と同様に $Q : \mathbb{Q} \to \mathbf{2}$ と考えて差し支えはありません。そこでデデキンド切断としての性質を満たす写像の集まり $\mathbb{R}\subseteq [\mathbb{Q},\mathbf{2}]$ を実数全体の集合として定義します。ちなみに今までの構成のように同値関係で割る必要はありません。実数として同じ意味を持つものは同じ写像になるようにしたので (ちゃんとやらないと1つの有理数に対応する実数が2つ出来たりします)。

これによって定義された実数は条件の境界にあたる数となります。特に、実数に関する順序を $\{(Q_1,Q_2)\in\mathbb{R}\times\mathbb{R}\mid\forall x\in\mathbb{Q}. Q_1(x) \Rightarrow Q_2(x)\}$ で定義するとこれは全順序関係になり、「条件 $Q$ で定義される実数は**条件 $Q$ を満たさない最小の数**である」であることがわかります。即ち $\forall R\in\mathbb{R}. (\forall x. \neg R(x) \Rightarrow \neg Q(x))\Rightarrow Q\le R$ ということですが、これはほぼ自明ですね。

> ここでの前提は気持ちの上では $\neg Q(R)$ と書きたいわけですが、$R\not\in\mathbb{Q}$ なので書けません。なので「$R\le x$ な $x\in\mathbb{Q}$ について $\neg Q(x)$」と言うことで代替しようというわけです。
> なおこの性質は「条件 $Q$ を満たす最大の数」とは違います。有理数 $a$ に対して $x<a$ である最大の数は存在しません (デデキンド切断の3つ目の要請)。

有理数からの埋め込みは $i(a) = (x \mapsto x < a) : \mathbb{R}$ で構成でき、今までの演算も全て受け継ぐことができます。それらを使って次のように演算を定義できます:

- $a\in\mathbb{R}, a > 0, n\in\mathbb{N}, n \ne 0$ に対して $x \mapsto x \le 0 \lor x^n < a$ で定義される実数を $\sqrt[n]{a}$ と書きます。また $n = 2$ のとき $\sqrt{a}$ と書きます。
- $a\in\mathbb{R}, a > 0, b\in\mathbb{Q}, b \ge 0$ に対して $b = p/q$ となる $p\in\mathbb{N}, q\in\mathbb{N},q\ne 0$ を用いて==冪乗, power== $a^b = \sqrt[q]{a^p}$ と定義します。
    - $p,q\in\mathbb{N}$ という条件は $b \ge 0$ であることから導出できるものです。
        - $b \ge 0$ より $p\ge 0 \land q > 0$ または $p\le 0 \land q < 0$.
        - $p\le 0 \land q < 0$ の場合は $-p$ と $-q$ を取り直せば $\exists p,q\in\mathbb{N}. b = p/q$ が示せます。
    - 冪乗の性質 $(a^b)^q = a^{bq} = a^p$ より、$a^b = \sqrt[q]{a^p}$ となる**はず**なのです。よってこれで定義します。
- $a\in\mathbb{R}, a > 0, b\in\mathbb{Q}, b < 0$ の場合は、$a^b = 1/(a^{-b})$ で定義します。
    - $-b\ge 0$ なので冪乗 $a^{-b}$ はすでに定義されています。
    - 冪乗の性質 $x^y \times x^z = x^{y+z}$ より、$a^{-b}\times a^b = a^0 = 1$ なので $a^b = 1/(a^{-b})$ である**はず**です。なのでこれを定義にしました。
- $a\in\mathbb{R}, a > 1, c\in\mathbb{R}, c > 0$ に対して $x \mapsto a^x < c$ で定義される実数を==対数, logarithm== $\log_a c$ と定義します。
- $a\in\mathbb{R}, a > 1, b\in\mathbb{R}$ に対して $x \mapsto x \le 0 \lor \log_a x < b$ で定義される実数を**また** $a^b$ と定義します。$b$ に関する定義域が増えているのですよ。
- $a\in\mathbb{R}, 1 > a > 0, b \in \mathbb{R}$ の場合は $a^b = (1/a)^{-b}$ で定義し、加えて $1^b = 1$ と定義します。これによって冪乗の定義域は $\{x\in \mathbb{R}\mid x>0\}\times \mathbb{R}$ まで広くなったことになります。
    - $1>a>0$ なら $1/a > 1$ で、$a^{-1}=1/a$ なので $a^{-b} = (a^{-1})^{-b} = (1/a)^{-b}$ なはずです。
    - 以後、$\mathbb{R}^+ = \{x\in\mathbb{R}\mid x>0\}, \mathbb{R}^+_0 = \{x\in\mathbb{R}\mid x \ge 0\}$ と書きます。

> ちなみに $0^x = 0$ とすると定義域が拡張できそうな気がしますが、元々の定義で $x^0 = 1$ を満たすために $0^0$ の値が競合するという問題があります。面倒なのでもう $0$ ごと定義域から抜きました。
> また、$x \le 0\lor \log_a x<b$ と書いたとき本来は $x > 0$ という条件が必要なはずです。ただ、これを満たさないときには $x \le 0$ よりこの命題が成り立つことがわかるので実質的に問題はないのです。
> そういえば $\log_a- : \mathbb{R}^+ \to \mathbb{R}$ は $a^-:\mathbb{R} \to \mathbb{R}^+$ を逆写像とする同型を成します。**数の量が減っている**ように見えても**同じ**なのです。無限というのは直観に反する挙動をするものです。
> - $b = \log_ac \iff a^b = c$ より 
> - $b = \log_ac$ とすると $a^{\log_ac}=a^b=c$
> - $c = a^b$ とすると $\log_a(a^b)=\log_ac=b$

これで実数には加減乗除と冪乗が使えるようになりました。もっと一般に、次の方法で実数を手に入れることもできます。

- $v:\mathbb{N} \to \mathbb{R}$ で $\forall i,j\in\mathbb{N}. v(i) \le v(j)$ 及び $\exists u\in\mathbb{R}.\forall i\in\mathbb{N}. v(i)\le u$ を満たすとします。
    - $v(0),v(1),v(2),\ldots$ と並べていくとだんだん増えていく (==単調増加性, monotonically increasing==) けどある程度より小さい (==有界性, bounded==) ような列ができます。逆に言えばそういう列はこう表現できます。
- $Q(x) = \exists i\in\mathbb{N}. x<v(i)$ という述語で定まる実数を==上限, supremum== $\sup\limits_{i\in\mathbb{N}} v(i)$ と呼びます。
    - 1つ目の条件: $Q(v(0)-1)$ 及び $\neg Q(u)$
    - 2つ目の条件: $Q(b)\land a\le b$ とすると $a\le b < v(i)$ となる $i$ が存在するので満たす。
    - 3つ目の条件: $a < v(i)$ とすれば $b = (a+v(i))/2$ は条件を満たします。

> 一般に、列が「行き着く先」のことを==極限, limit== $\lim\limits_{i\to\infty}v(i)$ と呼び、極限が存在することを==収束する, convergent==、存在しないことを==発散する, divergent==と言います。今回は「数列が収束して、極限が上限と一致する」ケースです。
>  数列 $v(i)$ が収束することは $\exists \alpha\in\mathbb{R}.\forall\varepsilon\in\mathbb{R}^+.\exists n\in\mathbb{N}. \forall i\in\mathbb{N}. n<i\Rightarrow |\alpha-v(i)|<\varepsilon$ で定義されます。これはある値 $\alpha$ に好きな $\varepsilon$ だけ近づけることを表し、そのとき極限が $\alpha$ となるわけです。
> 有界単調増加列が上限に収束することは $d = \sup\limits_{i\in\mathbb{N}}{v(i)} - \varepsilon$ よりも大きい $v(n)$ が存在することから言えます (無ければ上限が $d$ を越えないので矛盾)。

これは例えば無限小数表記を許容します。何故なら例えば $1.57321\ldots$ という数は $1, 1.5, 1.57, 1.573, \ldots$ という単調増加かつ有界 (明らかに $2$ で抑えられます) な列の上限であるからです。また、**逆に任意の実数は無限小数で表記できます**。何故なら上の位から順番に $Q(x)$ を満たすかどうかを判定していけば有界単調増加列が構成できるからです。

- $Q(x) = x^2 < 2$ とすると、まず $Q(1)\land \neg Q(2)$ なので $v(0) = 1$ とする。
- 次に $Q(1.4)\land \neg Q(1.5)$ なので $v(1) = 1.4$ とする。
- 次に $Q(1.41)\land \neg Q(1.42)$ なので $v(2) = 1.41$ とする。
- 次に $Q(1.414)\land \neg Q(1.415)$ なので $v(3) = 1.414$ とする。
- 順番に続けていけば $v:\mathbb{N} \to \mathbb{R}$ が構成でき、$\sup\limits_{i\in\mathbb{N}}v(i) = Q$ となります。

> なお**無限小数表記は一意ではない**ことに注意をしなければなりません。$Q(x) = x < 0.999\ldots$ と $Q'(x) = x < 1.000\ldots$ から構成される有限単調増加列 $v,v'$ はどちらも $0, 0.9, 0.99, 0.999, \ldots$ になります。つまり $Q(x) = \sup\limits_{i\in\mathbb{N}}v(i) = \sup\limits_{i\in\mathbb{N}}v'(i) = Q'(x)$ なのです。この辺が「ちゃんとやらないと」いけないところです。

実は上の方法で $v(0)$ を定義するには「与えられた実数を越えない最小の整数」を得る必要があったりします。これをその実数の==整数部分, integral part==と言い、整数部分を与える写像として==床関数, floor function== $\lfloor-\rfloor:\mathbb{R} \to \mathbb{Z}$ が次で定義されます。

> そういえば==関数, function==という語は「数に関わっている写像」くらいの解釈をすると良いです。本質的には写像以上の情報はありません。
> 「関数 $f(x)$」というのは $x \mapsto f(x)$ の意味で、「$x$ が文脈に入っている」ことを表すようなものです。

- $\forall x\in\mathbb{R}. \exists b\in\mathbb{Z}. b \le x$ である (==アルキメデス性, Archimedean property==)。
    - デデキンド切断の1つ目の仮定より $\exists l\in\mathbb{Q}. l < x$.
    - $l \ge 0$ なら $b = 0$ を取ればよい。以後 $l < 0$ を仮定する。
    - $l = -p/q$ である $p\in\mathbb{N}, q\in\mathbb{N}, q \ge 1$ が存在する。
        - $q\ne 0$ なので $q\ge 1$ である。
    - このとき $-p \le -p/q \le l$ より $b = -p \in \mathbb{Z}$ を取ればよい。
        - $-p\le -p/q \iff pq-p\ge 0 \iff p(q-1)\ge 0$ で、$p\ge 0, q\ge 1$ なため。
- 次の帰納法で有界単調増加列 $v:\mathbb{N} \to \mathbb{R}$ を定義する。
    - $v(0) = b$
    - $v(s(n)) = \begin{cases}v(n)+1&\text{if }v(n)+1<x\\v(n)&\text{otherwise}\end{cases}$
    - 単調性は自明、有界性は $x$ より小さいことから。
- $\lfloor x\rfloor = \sup\limits_{i\in\mathbb{N}}v(i)$ と定義する。

例えば $\lfloor \sqrt{1000} \rfloor = 31$ となります。ちなみに $x-\lfloor x\rfloor$ を $x$ の==小数部分, fraction part==と言う他、$\lceil x\rceil = -\lfloor -x\rfloor$ で定義される写像 $\lceil-\rceil:\mathbb{R} \to \mathbb{Z}$ を==天井関数, ceiling function==と呼びます。

#### 複素数

実数は直観的には「有理数の細かい版」です。だから有理数の範囲で「惜しい」数は実数として存在できますが、根本的に有理数で成り立たない性質を持つ実数はありません。例えば、$x^2 = -1$ です ($\forall x\in \mathbb{Q}. x^2 \ge 0$ なので)。この数を**在ったことにする**のは全く問題がありません。実数は別に現実に存在する数ではないのですから。

$\mathbb{C} = \mathbb{R}\times\mathbb{R}$ と定義し、埋め込みを $x \mapsto (x,0)$ で構成します。==虚数単位, imaginary unit==と呼ばれる数 $i$ を $(0,1)$ で定義して、次の演算を与えます。

- $(x_1,y_1) + (x_2,y_2) = (x_1+x_2, y_1+y_2)$
- $-(x,y) = (-x,-y)$
- $(x_1,y_1) \times (x_2,y_2) = (x_1x_2-y_1y_2, x_1y_2+x_2y_1)$
    - これによって $(x,y)\in\mathbb{C}$ に対して $(x,y) = x+iy$ と書くことが正当化されます。
        - $\Re=(x,y)\mapsto x, \Im=(x,y)\mapsto y:\mathbb{C} \to \mathbb{R}$ でそれぞれ==実部, real part==と==虚部, imaginary part==を取り出せます。 
    - そして $i\times i = (0,1) \times (0,1) = (-1,0) = -1$ が成り立ちます。
- $(x,y)^{-1} = (x/(x^2+y^2),-y/(x^2+y^2))$
    - $x\ne 0 \land y \ne 0$ のとき定義できるので $\mathbb{C}\setminus\{0\}\to\mathbb{C}\setminus\{0\}$ という写像になります。

$\mathbb{C}$ には加減乗除が定まることがわかり、$x^2=-1$ を満たす $x$ が存在することもわかりました。$\mathbb{C}$ のことを==複素数, complex number==と言います。この時、次の定理が知られています。

- $n\ge 1$ のとき、どんな $a_0,a_1,\ldots,a_n\in\mathbb{C}, a_n\ne 0$ に対しても $a_nx^n+a_{n-1}x^{n-1}+\cdots+a_1x+a_0 = 0$ を満たす $x\in\mathbb{C}$ が存在する (==代数学の基本定理==)。
    - このとき $a_nx^n+a_{n-1}x^{n-1}+\cdots+a_1x+a_0 = (x-b_0)(x-b_1)\cdots(x-b_{n-1})$ となる $b_0,b_1,\cdots,b_{n-1}\in\mathbb{C}$ が存在することも言えます。

> $a_nx^n+a_{n-1}x^{n-1}+\cdots+a_1x+a_0$ で表される $x$ に依存する式を==多項式, polynomial==と呼び、省略して $\sum\limits_{i=0,\ldots,n}a_ix^i = \sum\limits_{i=0}^na_ix^i$ などと書きます。ここで $\sum$ は $+$ の大きい版みたいなもので、他にも $\times$ の代わりに $\prod$ や $\cap$ の代わりに $\bigcap$ を使ったりします。演算の対象が規則的ならそれも**厳密に**記述するべきなので、これらの演算を使うべきではあります。足されたりする対象を==項, term==と呼び、項を指定する数 $i\in\mathbb{N}$ を==添字, index==と呼びます。

つまりは多項式で記述された条件に関しては $\mathbb{C}$ の範囲があれば十分条件を満たす数を取り出すことができるのです。例えば $x^3-1=0$ に対しては $x = 1$ の他に $x = (-1+\sqrt{3}i)/2, (-1-\sqrt{3}i)/2$ (略して $x=(-1\pm\sqrt{3}i)/2$) が取れます。$x^4-1=0$ なら $x=\pm 1, x=\pm i$ が満たすし、$x^5=1$ なら $x=1/4+\sqrt{5}/4+i\sqrt{5/8-\sqrt{5}/8}$ が満たしたりします。

> そろそろいい加減に $a/b$ を $\displaystyle\frac{a}{b}$ と書くことにします。上の式は $\displaystyle\frac14+\frac{\sqrt{5}}{4}+i\sqrt{\frac58-\frac{\sqrt{5}}{8}}$ です。

さて、冪乗を定義したいところではありますが幾分遠回りに作ることになります。

- まず==階乗, factorial== $-!:\mathbb{N} \to \mathbb{N}$ を次で定義します。
    - $0! = 1$
    - $s(n)! = s(n) \times n!$
- 複素数 $z=x+iy\in\mathbb{C}$ についての絶対値を $|z|=\sqrt{x^2+y^2}\in\mathbb{R}$ で定義します。
    - これは明らかに実数上での定義と一致します。
- 実数上の==指数関数, exponential function== $\exp:\mathbb{R}^+ \to \mathbb{R}$ を $\exp(x) = \displaystyle \sum_{i=0}^\infty \frac{x^i}{i!}$ で定義します。
    - これは $\displaystyle\sum_{i=0}^n \frac{x^i}{i!}$ で定義される列の極限です。
    - 単調増加は自明、有界性は次で従います。
        - $x/j < 1/2$ となるような $j\in\mathbb{N}, j\ge 1$ が存在する。
            - $j = 1 + \lceil 2x\rceil$ を取ればよい。
        - すると $j \le i$ のとき $\displaystyle \frac{x^i}{i!} \le \frac{x^j}{j!}\times\frac{1}{2^{i-j}}$
            - 1つ進むごとに $1/2$ が掛かるため。
        - $\displaystyle\sum_{i=j}^n \frac{x^i}{i!} \le \sum_{i=j}^n \frac{x^j}{j!\times 2^{i-j}}\le \frac{x^j}{j!}\sum_{i=j}^n \frac{1}{2^{i-j}}\le \frac{x^j}{j!}\times 2$.
            - 和を取る部分は $1+1/2+1/4+\cdots$ なので $2$ を越えない。
        - よって $\displaystyle\sum_{i=0}^n \frac{x^i}{i!} = \displaystyle\left(\sum_{i=0}^{j-1} \frac{x^i}{i!}\right) + \left(\sum_{i=j}^n \frac{x^i}{i!}\right) \le \left(\sum_{i=0}^{j-1} \frac{x^i}{i!}\right) + \frac{2x^j}{j!}$ より有界。
            - 一番最後の式が $n$ に依存しない定数であることが重要です。
                - 有界性の定義が要求する性質です。
- 実は $\forall x\in\mathbb{R}^+. \exp(x) = \exp(1)^x$ であることが知られています。
    - $\exp(a+b) = \exp(a)\times \exp(b)$ が成り立つのです。
        - これは項毎に計算するとわかります。
        - この時 $s\in\mathbb{Z}$ に対して $\exp(sa) = \exp(a)^s$ であることが言えます。
        - また $\exp(1)^\frac1p = \sqrt[p]{\exp(p/p)} = \sqrt[p]{\exp(1/p)^p} = \exp(1/p)$ より、$q\in\mathbb{Q}^+$ に対して $\exp(q) = \exp(1)^q$ が言えます。
        - 有理数範囲で一致するので実数でも一致します。
            - これは $\exp$ が多項式の無限和で定義されているから言えることではあります。
    - $e = \exp(1) = 2.718\ldots$ を==自然対数の底==と言います。これは==自然対数, natural logarithm==と呼ばれる写像が $\ln x = \log_e x$ で定義されるからです。
- よって複素数上の指数関数 $\mathbb{C}\to\mathbb{C}$ を $\exp(z) = \displaystyle \sum_{i=0}^\infty \frac{z^i}{i!}$ で定義しようというわけです。
    - この定義がちゃんと複素数を定めることは自明ではありません。
    - $\Re\exp(z) = \displaystyle\sum_{i=0}^\infty\frac{\Re(z^i)}{i!}$ 及び $\Im\exp(z) = \displaystyle\sum_{i=0}^\infty\frac{\Im(z^i)}{i!}$ が実数を定めることを言えばよい。 
    - $a(i) = \Re(z^i)/i!$ と置く。$v(n) = \displaystyle\sum_{i=0}^n a(i)$ とするとこの列の収束が言いたいことになる。
    - $v'(n) = \displaystyle\sum_{i=0}^n\left|a(i)\right|$ は $n\to\infty$ で収束する。
        - 明らかに単調増加。有界性は $|\Re (z^i)|\le |z^i|\le |z|^i$ より $\mathbb{R}^+$ のときを参照すればよい。
    - $v_+(n) = \displaystyle\sum_{i=0}^n \max\{0,a(i)\}, v_-(n) = \displaystyle\sum_{i=0}^n\max\{0,-a(i)\}$ を考えると、共に $n\to\infty$ で収束。
        - 明らかに単調増加、各項は $v'(n)$ の和における各項よりも小さいので有界。
    - 各項について考えると $v(n) = v_+(n) - v_-(n)$ が成り立つ。
    - つまり $v$ は $\displaystyle\sup_{i\in\mathbb{N}} v_+(i) - \sup_{i\in\mathbb{N}} v_-(i)$ に収束する。
        - 自明ではないが収束の定義に従えばわかる。
    - よって $\Re\exp(z)$ は実数を定める。$\Im\exp(z)$ も同様。
- この時、次の性質が成り立ちます (証明は大変そうなのでしません):
    - $\forall \theta\in\mathbb{R}. |\exp(i\theta)| = 1$
        - $\theta$ が増えるに従って==円周, circle== $S^1 = \{(x,y)\in\mathbb{C}\mid x^2+y^2=1\}$ の上をぐるぐる回っている感じです。
    - $\exists! \pi\in\mathbb{R}. \forall \theta\in\mathbb{R}. \exp(i\theta) = 1 \iff \exists n\in\mathbb{Z}. \theta = 2\pi n$
        - これは $\theta \mapsto \exp(i\theta)$ は $2\pi$ の周期を持つということです。
        - この $\pi$ を==円周率, pi==と呼びます。
            - 周期そのものにしなかったのは人類の失敗だと思います。
    - $\forall z\in\mathbb{C}. |z| = 1 \Rightarrow \exists \theta\in\mathbb{R}. \exp(i\theta) = z$
        - どんな円周上の点にも対応する角度がある、みたいな主張です。
        - この時 $\forall n\in\mathbb{Z}. \exp(i\theta + 2i\pi n) = z$ なので、うまくやると $-\pi \le \theta < \pi$ を満たす唯一の $\theta$ を取り出すことができます。
        - これを $z$ の==偏角, argument==と言い、$\mathop{\mathrm{Arg}} z$ で表します。
            - 一意な値を取るための制限は人為的なもので、実際うまくいかない部分が後に出てきます。
    - $\forall z\in\mathbb{C}. \exists(r,\theta)\in\mathbb{R}\times\mathbb{R}. r\ge 0 \land -\pi\le \theta < \pi \land z = r\exp(i\theta)$
        - これは基本的には $r = |z|, \theta = \mathop{\mathrm{Arg}} z$ を取ればよいです。
        - $z = 0$ なら $r=0, \theta=0$ を取ればよいです。
- これを用いて $z\ne 0$ に対して $\mathop{\mathrm{Log}} z = \ln r + i\theta$ と定義します。
    - これは「完璧」な対数関数ではありません。そこで対数関数の==主枝, principal branch==と呼ばれます。
        - 何故完璧でないかというと元々 $e^{0} = e^{2i\pi} = 1$ であるように対数の候補が複数あるのです。実際 $\forall n\in\mathbb{Z}. z = \exp(\mathop{\mathrm{Log}}z + 2i\pi n)$ が成立します。
        - これでは写像になれないので仕方なく $\theta$ に制限を掛けたのでした。
- ここで $a^b = \exp(b\times \mathop{\mathrm{Log}} a)$ と定義します。
    - これは元々実数で成り立っていた性質 $a^b = (e^{\ln a})^b = e^{b\ln a}$ を定義にしたものになります。
    - これも「完璧」ではありません。ここで問題となるのは $b\not\in\mathbb{Z}$ のときです。 
        - $b\in\mathbb{Z}$ なら対数のズレ $2i\pi n$ は $\exp$ が吸収して「冪乗にふさわしい値」が一意に決まってくれます。
        - そうでない場合、例えば $b = 1/2$ だと $2i\pi$ ズレるたびに2つの値を行き来することになるのです。これは $\displaystyle (-1)^{1/2}$ としてふさわしい値が $\pm i$ の2つあるというのと同じような状況です。
        - なので主枝を選んでおく必要があるわけです。主枝の選び方によって値が変わるので厄介な状況ではあります。
            - 例えば $i^i = 0.2078\ldots\in\mathbb{R}$ ですが、他にも $n\in\mathbb{Z}$ に対して $\exp(-\pi/2+2\pi n)$ で表される数は全て候補に成り得ます。
            
なんとか冪乗が定義できました。大変ですね。おまけで色んなものがついてきましたがそちらのほうが重要かもしれません。いわゆる==三角関数, trigonometric function==を $\theta\in\mathbb{R}$ に対して $\cos(\theta) = \Re\exp(i\theta), \sin(\theta) = \Im\exp(i\theta)$ で定義します。ここから例えば次の性質が成り立ちます。

- 任意の $\theta\in\mathbb{R}, a,b\in\mathbb{R}, n\in\mathbb{Z}$ について:
- $\exp(i\theta) = \cos(\theta) + i\sin(\theta)$ (オイラーの公式)
    - 今回はこれを定義にしたので当たり前になってます。
- $\cos(\theta)^2 + \sin(\theta)^2 = 1$
- $\cos(a+b) = \cos(a)\cos(b) - \sin(a)\sin(b)$
- $\sin(a+b) = \cos(a)\sin(b) + \sin(a)\cos(b)$
- $\cos(\theta+2\pi n) = \cos(\theta), \sin(\theta+2\pi n) = \sin(\theta)$
- $\cos(\theta+\pi) = -\cos(\theta), \sin(\theta+\pi) = -\sin(\theta)$
- $\cos(-\theta) = \cos(\theta), \sin(-\theta) = -\sin(\theta)$
- $\cos(\theta+\pi/2) = -\sin(\theta), \sin(\theta+\pi/2) = \cos(\theta)$
- $\cos(\theta) = (e^{i\theta} + e^{-i\theta})/2, \sin(\theta) = (e^{i\theta}-e^{-i\theta})/2i$

> 以後、恒常的に満たすべき性質を記述する際には「任意の」などの前置きや全称量化を省略することがあります。基本的には文脈で判断できると思います。

やっと空間を弄るための基盤が出来てきました。これらの定義は最初が大変なだけで、うまくいくことがわかっていれば後は割と自由に使えます。逆に後で「これでもうまくいくのか」が不安になったときは定義に戻ることができるので、ある程度の安心感がある状況だと思っていただければ良いのです。
