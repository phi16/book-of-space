### 構造の入った集合

今まで数の体系を5種類ほど作ってきたわけですが、それぞれ出来ることが異なる世界でありました。この「出来ること」というのは非常に重要なもので概ね何らかの名前が付いてたりします。というのは、何か具体的な集合に関する演算に関する性質を語るとき、**その具体性が本質でない**ことがしばしば起こるのです。その演算に成り立つ小さな性質をある程度集めれば大きな性質も証明できます。そして「概念化した状態で証明ができれば一般化が容易」なわけです。このような考え方を**抽象化**と言い、今までの「定義よりも特徴付け」という姿勢はその一端です。

例えば $(a+b)+c=a+(b+c)$ がわかったとしましょう。すると $((a+b)+c)+d = (a+b)+(c+d) = a+(b+(c+d))$ が証明できます。この性質を以って $a+b+c+d$ と表記することが正当化されます (どう解釈しても値が変わらないので)。そしてこの始まりの性質 (結合律) は加法・乗法・その他様々な演算に成り立つものです。これで初めていろんな演算を括弧付けずに記述することが実はわかるのです。

> $a+b\times c$ のような表記の正当化はまた別の話で、これは「$\times$ のほうが先に解釈する」というルールによるものです (今初めて宣言しました)。同様に $ab^c$ は $(ab)^c$ ではなく $a\times (b^c)$ と解釈します。また極端な例では $1.23$ は $1.2\times 3$ ではなく $1 + 0.2+0.03$ なのです。$f(x)(y)$ のように解釈が元々唯一であれば問題は無いのですが、曖昧な場合は表記を制限するか優先順位で対処する必要があります。

順に小さい性質から確認していきます。

#### 半群

集合 $X$ 上の**二項演算**と呼ばれる $X\times X \to X$ であるような写像 $\cdot$ について、**結合律** $\forall a,b,c\in\mathbb{X}. a\cdot(b\cdot c) = (a\cdot b)\cdot c$ が成り立つとき、組 $(X,\cdot)$ を**半群**と呼びます。

> 何故「組」にする必要があるかというと、演算は複数種類あってもよいからです。例えば $\mathbb{N}$ 上の演算として $+$ と $\times$ は共に結合律を満たしますし、$(x,y)\mapsto 0$ も満たします。つまり「$X$ は半群である」という言い方では演算を**取り出せない**のです。これはもう少し正確に言うと「$X$ 上の結合的二項演算が存在する」という言明になるわけですが、この問題は古典論理だと**具体的な演算を与えなくてもこれを証明できる場合がある**ことが根底にあると解釈する立場があります。逆に、具体的な存在を示さなければ証明にならないという立場を取る**直観主義論理**という体系もあり、そちらでは「$X$ は半群である」というだけで演算がちゃんとついてきます。とは言え古典論理で概ね問題ないわけで、現代はそちらが主流です。未来では変わるかも。

半群の例は大量にあります。

- それぞれの数の体系における加法・乗法
    - つまり $a+(b+c) = (a+b)+c$ 及び $a\times (b\times c) = (a\times b)\times c$ ということです。
- それぞれの数の体系における大きい方を返す写像 $\max$、小さい方を返す写像 $\min$
- 適当な集合 $X$ について
    - 各要素 $a\in X$ に対して、$X$ 上の二項演算 $(x,y)\mapsto a$
    - 任意の集合 $X$ における $X$ 上の二項演算 $(x,y)\mapsto x$ 及び $(x,y) \mapsto y$
    - $[X,X]$ 上の二項演算 $(g,f)\mapsto g\circ f$
    - $\mathcal{P}(X)$ 上の二項演算 $(A,B)\mapsto A\cap B$ 及び $(A,B)\mapsto A\cup B$
- 命題の真偽 $\mathbf{2} = \{0,1\}$ に関する $\land$ 及び $\lor$
- 半群 $(X,\cdot)$ に対して $(x,y)\mapsto y\cdot x$

半群の場合は $a\cdot b\cdot c\cdot d$ のように括弧を付けない書き方が許容される他、$\underbrace{x\cdot x\cdot \cdots \cdot x}_{n}$ が $n\ge 1$ に対して定義できるので $x^n$ という表記が使えます。例えば $(a\mapsto a+2)^n = a\mapsto a+2n$ と考えることができます。とは言え集合の要素だけから半群の演算はわからないので、使われ方が明らかな「ある数の体系の乗法」か、あったとしても「自己写像 $A \to A$ の合成」くらいにしか使われません。

> $\mathbb{R}^2 = \mathbb{R} \times \mathbb{R}$ などはこの枠組みで定義できません。何故なら**まず集合にならない**上、結合律を満たさないからです。集合にならないというのは「集合全体からなる集合」が存在しないから、結合律を満たさないのは組としては $(a,(b,c))\ne ((a,b),c)$ だからです。とは言えこの表記は便利なので、ある集合 $X$ と $n\in\mathbb{N}, n\ge 1$ に関して $X^n = \underbrace{X\times X\times \cdots \times X}_{n}$ と置くことにします。$(X\times X)\times X$ と $X\times (X\times X)$ は等しくはないものの同型にはなるので、あまり細かいことは気にしないでいきます。

#### モノイド

半群 $(X,\cdot)$ について**単位元の存在** $\exists e\in X. \forall a\in X. e\cdot a = a = a\cdot e$ が成り立つとき、これを**モノイド**と呼びます。**単位元** $e$ は $1$ と書いたりすることがあります (乗法の単位元が $1$ なので)。この $1$ は数字の $1$ というよりは記号で、前に定義した $1_A : A \to A$ もこの意味を持っています。というのは、$A$ 上の自己写像の成す半群は単位元を持ち、それがこの恒等写像なのです。

先程挙げた例にはモノイドになるものとならないものがあります。

- 加法と乗法はそれぞれ単位元が $0$ と $1$ です。
- 自然数に関する $\max$ だけは単位元 $0$ が存在します。他の数の体系の $\max$ や $\min$ には存在しません。
- $(x,y)\mapsto a, (x,y)\mapsto x, (x,y)\mapsto y$ には単位元はありません。
- $(g,f)\mapsto g\circ f$ については $1_X$ が単位元です。
- $(A,B) \mapsto A\cap B$ なら $X$、$(A,B)\mapsto A\cup B$ なら $\varnothing$ が単位元です。
- $\land$ については $1$ 、$\lor$ については $0$ が単位元となります。
- モノイド $(X,\cdot)$ に対して $(x,y)\mapsto y\cdot x$ で定義された演算は元の演算と同じ単位元を持ちます。

モノイドになると先程の $x^n$ の表記で $n = 0$ の場合を認められることになります。

> ちなみにモノイド $(X,\cdot)$ を単位元を含めて $(X,\cdot,e)$ と書く流派もあります。気持ちとしては「単位元の存在がわからないから」とも言えますが、実は演算から単位元は (存在すれば) 一意に定まるので別に書かなくてもいいという意見もあります。本質的にはどうでもいいです。

なお半群 $(X,\cdot)$ があったときに「それを含むモノイド」を構成する方法として次が知られています。

- まず任意の集合 $A,B$ について**非交和** $A\sqcup B = \{(0,a)\mid a\in A\} \cup \{(1,b)\mid b\in B\}\subseteq\mathbf{2}\times (A\cup B)$ を定義します。
    - これは $A$ と $B$ を元々違う要素を持つ集合だったとしてくっつけたものです。
    - $a\in A$ は自然に $(0,a)\in A\sqcup B$ とみなせ、また同様に $b\in B$ は自然に $(1,b)\in A\sqcup B$ と出来ます。
    - これらは埋め込みになるので $A\sqcup B$ の要素は $A\cap B = \varnothing$ のときの $A\cup B$ の要素という気持ちで書いても差し支えはありません。
- モノイド $(X\sqcup\{e\},*)$ を次で定義します。
    - $x\in X$ に対して $e*x = x*e = x$
    - $x,y\in X$ に対して $x*y = x\cdot y$

これはまさしく**単位元を在ったことにする**方法です。このように既存の構造を改造して出来ることを拡張するのはまたどこでも行われることです。ちなみに既に単位元がある場合には新しい単位元ができちゃうので「美しい」わけではないです。

おまけとして、**可換性** $\forall a,b\in X. a\cdot b = b\cdot a$ を満たすモノイドを**可換モノイド**と言います。一般に可換性を持つとき名前に可換とつけるので可換半群もそういう概念として定義されます。可換だと「集合の全要素に対して演算を実行する」ことが正当化され (順序を気にしなくていいので)、例えば $+$ に対して $\sum \{x_1,x_2,\ldots,x_n\} = x_1+x_2+\cdots x_n$ や $\bigwedge\{P,Q,R\} = P\land Q\land R$ 及び $\max\{a,b,c\} = \max(\max(a,b),c)$ などと「演算の対象として集合を与える」ことができるようになります。なお出来るとしても有限集合で、可換半群のときは要素が1つ以上存在することが要求されます。

> 本当は集合なら**冪等性** $\forall a\in X. a\cdot a = a$ も要求しないといけないはずですが、あまり気にしない傾向がありそうです。$\cup$ 及び $\land$ や $\max$ は可換かつ冪等です。
> 有限集合は未定義語ですが $\{x_1,\ldots,x_n\}$ で表せる集合と考えておけばよいです。

#### 群

モノイド $(X,\cdot)$ について**逆元の存在** $\forall x\in X. \exists y\in X. x\cdot y = y \cdot x = e$ が成り立つとき、これを**群**と呼びます。$x$ についての逆元は $x^{-1}$ と表記され、これは演算から (存在すれば) 一意に定まります。群まで行くと条件が幾分厳しく、今までの例では「自然数よりも広いときの加法」くらいしか成り立ちません (乗法は有理数だと $0$ があるのでダメ)。とは言え当然例はたくさんあります。

- 数から $0$ を除いた集合上の乗法 (**乗法群**と呼びます)
    - $0$ でない2つの値を掛けても $0$ にはならないので、ちゃんと二項演算になることがわかります。
        - 演算の結果が元の集合にちゃんと含まれることを**閉じている**と言います。
- $A$ 上の自己同型の集合 $\mathrm{Aut}(A) = \{f\in[A,A]\mid f:A\cong A\}$
    - 同型と同型の合成は同型 (2つの逆写像を合成すれば良い)。
    - 逆元は逆写像。
- $\mathbf{2} = \{0,1\}$ について、次で定義した演算
    - $0\oplus 0 = 1\oplus 1 = 0$
    - $0\oplus 1 = 1\oplus 0 = 1$
    - 条件を満たすことは計算して確かめれば良いです。
- $S^1 = \{z\in\mathbb{C}\mid |z| = 1\}$ と乗法
    - $|z_1| = |z_2| = 1$ のとき $|z_1z_2| = 1$ なので閉じています。
    - $z$ の逆元は $z^{-1}$ です。
- $n\in\mathbb{N}, n\ge 1$ について、$n$ の**倍数**からなる集合 $n\mathbb{Z} = \{x\in\mathbb{Z}\mid \exists i\in\mathbb{Z}. x = in\}$ とその上の加法
    - $in + jn = (i+j)n$ なので閉じています。
    - $in$ の逆元は $-in$ です。
- 集合 $\{*\}$ と演算 $(*,*)\mapsto *$
    - 明らかです。

特に自己同型、即ち「世界をそれ自身に丁度写す変換」というものが群を成すことは重要で、群というのは「世界に潜む1つの対称性」を表したものだと考えることができるのです。例えば群 $(S^1,\times)$ は $\mathbb{C}$ の各要素に掛け合わせることで「$\mathbb{C}$ を $0$ を中心にして回す」操作に対応させることが出来ます。回しても元に戻せることが逆元の存在によって保証されています。このような「群を使って世界に影響を与える」構造を**群作用**と呼び、厳密には次のように定義されます。

- 群 $(G,\cdot)$ 及び集合 $X$ について、写像 $*:G\times X \to X$ が群作用であるとは次が成り立つことを言う:
- $\forall x\in X. 1*x = x$
- $\forall a,b\in G, x\in X. a*(b*x) = (a\cdot b)*x$

これは群に備わっているモノである単位元と演算が**そうあるべく振る舞う**ことを要請していることになります。もう少し言うと $*:G\to\mathrm{Aut}(X)$ が**群準同型**であるという要請です。

- 群 $(G,\cdot), (H,*)$ について、$f : G \to H$ が群準同型であるとは次が成り立つことを言う:
- 単位元の保存 $f(1) = 1$
    - 左の $1$ は $G$ の単位元、右の $1$ は $H$ の単位元です。
    - わかりやすくするために $f(1_G) = 1_H$ と書くこともあります。
- 演算の保存 $f(a\cdot b) = f(a)*f(b)$

この条件があると逆元の保存は自動的に成り立つので明示はされてませんが、感情としては**全ての演算がそのまま写る**ことを要請しています。これを意図して準同型を $f: (G,\cdot) \to (H,*)$ と書くこともあります。

> 群作用の2条件と一致することは $f = a \mapsto (x \mapsto a*x) : (G,\cdot) \to (\mathrm{Aut}(X),\circ)$ を考えればわかります。

一般に、「或る性質を満たす演算を伴った集合」を**代数系**と言い、2つの代数系 $A,B$ があったときに $A$ の構造を $B$ の世界に写す写像 $f : A \to B$ を**準同型**と言います。半群準同型やモノイド準同型もあります。また、準同型で全単射なものを**同型**と言います。

> これはちょっと用語が複雑な状況です。まず、今までの同型という語は「0個の演算が伴った集合 (つまりただの集合)」における同型だったのです。その意味では写像は**集合準同型**です。「どの世界の話をしているのか」で同型の意味が変わる (とはいえ同型という意味なんですけど) ので幾分注意は必要です。
> また、実は準同型で全単射なものが同型なのは定義ではなく**定理**です。元々同型は $g\circ f = 1 \land f \circ g = 1$ で定義されましたが、これは全単射なら自動的にこれを満たすわけです (ここでの $1$ は「自分自身への何もしない代数準同型」なのですが、準同型の等しさは写像の等しさに一致するのです)。

さて、群によって対称性が記述できることがわかったわけですが、その群の性質によって対称性を**分解**できることもわかっています。感情的には「平面の移動は横移動と縦移動に分解できる」とかそういう話です。

まず集合に対する部分集合のように、群に対する**部分群**を定義します。

- 群 $(G,\cdot)$ に対し、集合 $H\subseteq G$ が部分群を成すとは次を満たすことを言う:
- $1\in H$
- $\forall a,b\in H. a\cdot b \in H$

つまり $(H,\cdot)$ が群になるということです。今までの例でも $n\mathbb{Z}$ は $\mathbb{Z}$ の部分群でした。そして、**性質の良い**部分群である**正規部分群**を次で定義します。

- 群 $(G,\cdot)$ に対し、部分群 $(H,\cdot)$ が $G$ の正規部分群であるとは次を満たすことを言う:
- $\forall h\in H. \forall g\in G. ghg^{-1}\in H$
- この状況を $G \triangleright H$ と表します。

これは $H$ が世界の影響を受けないという状況で、「回して平行移動して逆に回したら結局平行移動」みたいな話です。$H$ の操作と $G$ の操作の順序が本質的に関係ない ($h\in H$ に対して $gh=h'g$ となる $h' = ghg^{-1}\in H$ が存在する) と捉えることもできます。実際**可換群の部分群は正規部分群**です。

そして、$G\triangleright H$ のとき**実際に $H$ を分離できます**。

- $g\in G$ に対して**左剰余類** $gH = \{gh\mid h\in H\}$ を定義します。
    - $h \mapsto gh$ は全単射なのでそれ自体にはwell-defined性は関わってきません。
    - $g \mapsto gH$ が**単射ではない**ので後に気にする必要があります。
- $G/H = \{gH \mid g\in G\}$ を考え、演算 $*$ を次で定義します。
    - $gH, g'H \in G/H$ とし、$gH * g'H = \{ghg'h' \mid gh \in gH, g'h' \in g'H\}$
        - well-definedかどうかはまだわかりません。
    - ここで $\exists h''\in H. g'h'' = hg'$ より $ghg'h' = (gg')h''h$。
    - よって $gH * g'H = \{gg'h\mid h\in H\} = gg'H$.
    - $g_1H = g_2H, g'_1H = g'_2H$ と仮定すると $g_1H*g'_1H = g_2H*g'_2H$.
        - $g_1H \subseteq g_2H$ より $g_1 \in g_2H$ なので $\exists h\in H. g_1 = g_2h$.
        - 同様に $\exists h'\in H. g'_1 = g'_2h'$.
        - $g_1g'_1H = g_2hg'_2h'H = g_2g'_2h''h'H = g_2g'_2H$ である。
            - ここで $h'' = g'_2h(g'_2)^{-1}\in H$.
        - よって $g_1H*g'_1H = g_1g'_1H = g_2g'_2H = g_2H*g'_2H$.
- これによって $G/H$ は群を成します。これを**剰余群**と言います。
    - $(gH*g'H)*g''H = gg'g''H = gH*(g'H*g''H)$
    - $1H*gH = gH, gH*1H$
    - $gH*g^{-1}H = 1H = g^{-1}H*gH$
- なお**右剰余類** $Hg = \{hg\mid h\in H\}$ を使っても同じ結果になります。特に正規部分群の性質から $gH = Hg$ です。

> やってるときは集合とその同値関係による商集合の構成と同じで、群とその正規部分群で商群 (とも言います) を作っているという状況です。集合には構造は入っていませんでしたが群の場合は**割るときに構造を保つ**必要があるので、同値関係では足りず正規部分群であることが要請されるのです (実際 $gH = g'H$ で同値関係を成すので同値関係より**強い**状況です)。

剰余群を構成したとき、全射な準同型である**射影** $\pi = g \mapsto gH:G \to G/H$ が存在します (射影というのは「一部を潰す」くらいの意味です)。例えば $n\mathbb{Z}$ は $\mathbb{Z}$ の正規部分群になります (可換群なので) が、剰余類への射影 $\pi:\mathbb{Z} \to \mathbb{Z}/n\mathbb{Z}$ は $n$ の倍数による違いを無視する写像、即ち **$n$ で割った余りを返す写像**です。同様に $\mathbb{R}/\mathbb{Z}$ は整数部分を無視する、即ち**小数部分を返す写像**になります。これらの重要なところは剰余群として**割られた世界に名前がついて群を成す**点です。

- $\mathbb{Z}/n\mathbb{Z}$ の要素は $i+n\mathbb{Z}$ と表せ、$0\le i<n$ が割った余りに相当します。
    - 群構造が入っているのでこの上で加算ができます。例えば $(2+5\mathbb{Z}) + (3+5\mathbb{Z}) = 5\mathbb{Z}$ です。
    - これは即ち $\mathop{\mathrm{mod}} 5$ 上の演算 $2+3\equiv 0$ の表現です。
- $\mathbb{R}/\mathbb{Z}$ の要素は $x+\mathbb{Z}$ で表せ、$0\le x < 1$ が小数部分に対応します。
    - 同様に $\pi(0.598) + \pi(0.783) = \pi(0.381)$ という計算ができます。

元々周期的な世界への写像は正しくwell-definedになり、例えば $\mathbb{R}/2\pi\mathbb{Z} \to S^1$ である写像として $\theta+2\pi\mathbb{Z}\mapsto \exp(i\theta)$ を与えることができます。これは**群同型**にもなります。

> 剰余類の演算の記号は変える必要も無いと思うので元々の群と同じものを使うことにします。先の群同型は $(\mathbb{R}/2\pi\mathbb{Z},+)\cong(S^1,\times)$ です。
> そういえば最初に定義した群 $(\mathbf{2},\oplus)$ は $(\mathbb{Z}/2\mathbb{Z},+)$ と同型です。

代数系によってそれぞれ特徴や表現できる範囲が結構異なることがよくわかると思います。一般に**制約が強ければ強いほど具体例は少なく、証明できる定理が多い**です。ちょっとした制約の違いで世界が全く違うことは起きるものなのです。定義よりもその先に広がる世界が重要だと思うのです。
